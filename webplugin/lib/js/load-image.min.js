!function(t){"use strict";var e=function(t,n,r){var o,i,a=document.createElement("img");if(a.onerror=n,a.onload=function(){!i||r&&r.noRevoke||e.revokeObjectURL(i),n&&n(e.scale(a,r))},e.isInstanceOf("Blob",t)||e.isInstanceOf("File",t))o=i=e.createObjectURL(t),a._type=t.type;else{if("string"!=typeof t)return!1;o=t,r&&r.crossOrigin&&(a.crossOrigin=r.crossOrigin)}return o?(a.src=o,a):e.readFile(t,function(t){var e=t.target;e&&e.result?a.src=e.result:n&&n(t)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},e.transformCoordinates=function(){},e.getTransformedOptions=function(t){return t},e.renderImageToCanvas=function(t,e,n,r,o,i,a,c,s,d){return t.getContext("2d").drawImage(e,n,r,o,i,a,c,s,d),t},e.hasCanvasOption=function(t){return t.canvas||t.crop},e.scale=function(t,n){n=n||{};var r,o,i,a,c,s,d,u,f,h=document.createElement("canvas"),g=t.getContext||e.hasCanvasOption(n)&&h.getContext,v=t.naturalWidth||t.width,l=t.naturalHeight||t.height,m=v,O=l,b=function(){var t=Math.max((i||m)/m,(a||O)/O);t>1&&(m=Math.ceil(m*t),O=Math.ceil(O*t))},w=function(){var t=Math.min((r||m)/m,(o||O)/O);1>t&&(m=Math.ceil(m*t),O=Math.ceil(O*t))};return g&&(n=e.getTransformedOptions(n),d=n.left||0,u=n.top||0,n.sourceWidth?(c=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(d=v-c-n.right)):c=v-d-(n.right||0),n.sourceHeight?(s=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(u=l-s-n.bottom)):s=l-u-(n.bottom||0),m=c,O=s),r=n.maxWidth,o=n.maxHeight,i=n.minWidth,a=n.minHeight,g&&r&&o&&n.crop?(m=r,O=o,f=c/s-r/o,0>f?(s=o*c/r,void 0===n.top&&void 0===n.bottom&&(u=(l-s)/2)):f>0&&(c=r*s/o,void 0===n.left&&void 0===n.right&&(d=(v-c)/2))):((n.contain||n.cover)&&(i=r=r||i,a=o=o||a),n.cover?(w(),b()):(b(),w())),g?(h.width=m,h.height=O,e.transformCoordinates(h,n),e.renderImageToCanvas(h,t,d,u,c,s,0,0,m,O)):(t.width=m,t.height=O,t)},e.createObjectURL=function(t){return n?n.createObjectURL(t):!1},e.revokeObjectURL=function(t){return n?n.revokeObjectURL(t):!1},e.readFile=function(t,e,n){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,n=n||"readAsDataURL",r[n])return r[n](t),r}return!1},"function"==typeof define&&define.amd?define(function(){return e}):t.loadImage=e}(this);